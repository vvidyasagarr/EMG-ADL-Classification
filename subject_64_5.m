function [y1] = subject_64_5(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 29-Nov-2022 00:15:31.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx64 matrix, input #1
% and returns:
%   y = Qx6 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 6 7 8 9 10 11 12 13 14 19 20 21 22 23 24 25 26 27 32 33 34 35 36 37 38 39 40 45 46 47 48 49 50 51 52 53 58 59 60 61 62 63 64];
x1_step2.xoffset = [46.142678;0.155381673361038;0.0322491982268484;0.407030999756587;0.177704281988927;9.47364355116;0.0985949632107022;5.91738503146701;0.140679015455475;19.7913097778597;0.240331765539652;0.0128853940661603;0.300452723291878;0.0832048762445252;2.07691542926002;0.0986251000672275;5.37331914876223;0.134055835578749;12.0020202931022;0.594282863339132;0.0152234916874643;0.342418642828735;0.0502770400721775;0.758334227525804;0.0296944334548208;0.43078261039034;0.037957140518691;6.56148588763352;0.993567273771605;0.0412287452795994;0.297675743023799;0.0261489594326266;0.205130423822745;0.00759092210375632;0.0256023103541543;0.00925345643713531;46.350319;0.0178474334400028;0.0295819811581609;0.387262238161641;0.184300123477776;10.189960654177;0.112865408026756;6.097197800077];
x1_step2.gain = [0.0160958217749573;1.09000580267698;0.689358165670678;1.09729749703934;3.00619468348499;0.00981741403321055;2.8740627929949;0.00496820070233555;1.94525392482023;0.0133126322497323;1.04270159300522;0.493043374661269;1.48421065640402;2.9615399615959;0.0117279317055961;2.82520396741182;0.00543271971349456;2.03329789876055;0.0220315545160894;0.999113985783162;0.561572777463447;1.84655849494705;4.39507680223613;0.0263679384939785;9.00651872777799;0.0563676234304081;6.48071014456418;0.0299465685015482;0.921158278628744;0.644544396337628;2.24224811498562;6.83182009554764;0.0659991860022238;28.5427025920371;0.645026770016163;21.5054755058106;0.00720855800005767;1.04145252663245;0.582697957937943;1.93280739440303;1.4947979657693;0.00291968631522883;1.35208834216023;0.00153544750090583];
x1_step2.ymin = -1;

% Layer 1
b1 = [1.4999875093227479361;-0.91468392436075385277;-0.0043186623390761508592;-0.65057383845978544734;0.37701971602932327077;-0.5590952157020019353;-0.013546841076204515358;-1.087682106336358645;-1.5564203286157982653;-1.2636580105373189653];
IW1_1 = [0.23025221883810809143 0.49843561380070999789 -0.144537157076746553 0.30798179486292942553 0.3551195528797143619 0.4885505065972469696 0.050691661576587200566 0.22947657216698069682 -0.064264800231202984238 0.23128801790789002557 0.17885941168091432085 0.24378207325093273483 -0.58104188491704311659 -0.13224429977262938674 0.22412425744571093378 -0.089187820972853146251 -0.050297522912641209891 0.46482199025635506651 0.47941476396379745228 -0.33124364264937483648 -0.044558779980054426251 -0.34405050103398088224 0.24871685130831616695 0.17575629243771262455 0.65708547274272044447 0.62454439634653846625 0.0082531321034075948162 0.10595724979952356182 0.34889478023991016276 -0.2141036508942097405 -0.22651920906645933718 0.2792559669558755675 -0.21427228936491202194 0.10757629204596397265 0.47772268736562767399 0.24013651723461051923 -0.35355470639811786837 1.8990039367310262985 -0.54186040643023436481 0.097465950919491561866 -0.56560384540834995892 0.34224493618591389499 -0.79948022158583642582 -0.25690760775755933087;0.033838214405179589672 -0.047660782670986917564 0.075510745478150648191 -0.75323200562840408878 -0.063012276420355575746 0.10324943361652461071 0.52140715453805797086 0.062266484740678404441 0.39719602273744897269 0.14156517989046912831 -0.54669510699847134738 0.018193230577482531751 -0.58939786094882984369 0.039222606691760468489 0.028547629479473823205 0.54724335066217599799 -0.39403539598649023334 -0.29815124011882215838 -0.26977122213321091948 -0.068483995915255169162 0.022989085149568724842 -0.27671238769545081215 -0.20776043473389296801 -0.071618991850309940417 -0.24158187884024198699 -0.40761527224546817427 -0.065376773045538030815 -0.019309659338598017531 -0.11797711777196485949 -0.22923746646033213437 0.18998115999050399494 -0.068833592376702557036 -0.24452546555916734872 -0.1776919525866300642 -0.21862551307544580981 0.25456888568774110881 0.78360471903137718375 -1.012968796349847711 0.043016221081223736389 0.39922615912636016944 0.86420018244726737322 0.20247876654388793916 0.1348965734884217671 0.5271711449997010801;-0.62041507558352038121 0.59694170781819766436 -0.11685540831495107306 0.60090760442597723756 -0.56498111341712409228 0.052852206252354073934 -0.54930402210479500891 -0.41387872257266983267 -0.36394888241096590153 -0.63468778187925556367 0.66654861764825168446 0.022233434513961838203 0.50876548716291047914 -0.52445870291482832304 0.039559494237476865164 -0.75896478035590264621 -0.13985512170376354635 -0.47477234726221378969 -0.12759975911788515313 0.75184023706123448427 0.408975885190086208 0.71926775023826727828 0.25051161124057941265 0.68504621815520794215 -0.35396054995489717454 -0.15419029518572119342 -0.12295784436305104426 0.018333267005987186754 0.19355139977093499537 -0.0039905553135860475505 0.025069094475271912204 -0.37074171823272933368 0.39817986186517401181 0.080854605623527114888 0.23638189200707318549 -0.13289124299248833427 0.33925570462365478575 0.033983398905169055759 0.25091622112645428633 -0.11014901219754742734 -0.29329026352044379466 0.064935553110757812667 0.44083525755317604089 0.42214381880074058895;0.19130846255034739123 0.60559444044625898584 0.3157764716645752312 1.1097139657975367832 0.070665143371627991975 -0.23911258549278505137 -0.97402988655193334377 -0.4467667101843342814 -0.31670401258697283842 0.24515169874227651925 0.40828267983661953311 -0.065799745533105219453 0.023370249473513862726 -0.083192469173077904232 -0.1325442491277460666 -0.28958283847668608857 -0.22552858741106887597 -0.46563741891886512025 0.47605851709102608993 -0.18220344381276248891 0.62828015431462003182 -0.24853155701927964749 0.51357609781872037846 0.1963618303413266486 0.224499162623899573 0.16030554920231079863 0.17569631747901356955 0.30974597093469019571 -0.12797452210395818262 -0.22903780047249966412 -0.069170714987148496089 0.039112941485665991825 0.39375596720783551108 -0.13195183511665201093 -0.45273528943271867941 0.033572676377030402639 -0.5015507290170271304 -0.63383215498664913223 -0.58116392237069181004 2.3716876025356405933 0.10183936265815769773 -0.08765223483268048954 -0.60137013459138566329 -0.62048443209000547771;0.54626372711559478823 -0.62397911223506485889 0.04611722966926051076 0.26550579183361200375 0.34793488190323185183 -0.22906392335023145757 0.40777661557201894116 0.053156353665346607607 0.54897415361031332015 -0.18471892557640415267 -0.4643188088819241166 -0.05653280541869126069 -0.05947680563206097365 0.36223714049445238095 -0.11674956583819734446 0.064962512181346340756 0.33499362910340280131 0.18685908650909557882 0.54851769976770481385 -0.37676447201989415881 -0.087572279436639963168 -0.24903307750587472258 -0.18218633882033619109 -0.29695537495379847881 0.54904185028230967358 -0.21661668286451238319 0.54084637273885582953 0.17950867901252592906 -0.24830535356268260139 0.12136920338930705376 -0.058632994303857259577 0.38073510291272932848 -0.21877098087080748545 0.51041731873920437312 -0.32099583104272733092 0.13878133034382120203 -0.30246456549937239533 -0.76842604832850824881 -0.29628843872347132571 -0.33177790524074235456 0.32033703447091643746 -0.11785568465645489267 -0.29444928310880663647 -0.49198945024213597277;-0.58739548324725343598 0.27797139519263502905 0.32615892547795699574 0.090820810012321534499 -0.004785342273836732524 -0.26313521340836409923 -0.63682441426275315788 -0.16458061730151926638 -0.050356345560139119388 -0.1815949132139723643 0.17627565871710937362 -0.35331025038523045101 0.52581712553854387249 0.031746363917191933179 0.23686541999523982871 -0.48387119485492197102 -0.0030797952433583150253 -0.024300289586961783955 -0.6498566925852939935 0.73793625292195885734 0.31906194100638562983 0.55374781146490226202 -0.2532535002338923702 -0.066717310624688552778 -0.25192886282835280642 -0.11499402817749261596 -0.29952787534535924019 -0.13375299617257399576 0.088534706549854472191 -0.33405042929430645016 0.34348712275486287249 -0.38266285160984447877 -0.37312373982049229504 0.041212528407856829915 -0.099740522680563409308 -0.095490096826088860515 0.15108736283291712699 0.18118695498183221004 0.077297185502833293258 0.21478919439822938275 0.015219208376315435105 0.22922839281853435445 0.47907534732277579081 0.22735471244691199399;-0.1254337628400879201 -0.72364640030166627049 0.21570389620110988482 -0.6726507021675039999 -0.14437289455493620971 -0.17631878030042105743 0.77192135314602783325 -0.011679082750345532588 -0.049633892092587346412 -0.20883724047450333283 -0.74581998629688117664 -0.42570161556611363363 -0.56828578846903421429 0.28171589275057939972 -0.095808873014775183807 0.62272029530113803819 -0.079584561213643378874 0.21441824104399936912 -0.38949986465355929122 -0.39573701286520857057 0.59418666309870460385 -0.70900672804125297599 -0.28237264897574337885 -0.72416835852625971448 0.16560406350934606112 -0.33118580134144470772 -0.20599130073463983726 0.28725273210482904496 -0.23360324578741045731 0.24690714578089231757 0.48901263414587431422 -0.33862913701947544576 -0.52797486418132066888 -0.26856662576652878816 -0.38256170496539604331 -0.28588369351670761542 1.4069486465176448409 -2.086540095000806172 -0.041859367715820168521 0.49467886802315214068 1.3283898865876151429 0.45398928314309455745 0.90894799824747385397 0.46517249818541134276;0.3158822579551168741 0.27809339938267724213 -0.016677438678467014499 -0.16649933178720016658 0.33018258788336146692 0.054738859316976314073 -0.14117684707687722101 0.053201723320368224379 0.18218926857109382644 -0.026045910864513639738 0.50113683495706606852 0.15803669481452212175 0.17645890682979969988 0.20956188500121861185 0.19290131713689306903 0.36877439930194577666 0.2701243807200889302 0.40003129541005189029 0.075375960679998202374 0.1210551099194480118 0.31513149398246265154 0.033687263735255400243 0.35834768529523219893 -0.0012358560480224597272 -0.15470538541064812743 0.22953228347549214927 0.50133962520546859754 -0.39055342535090392664 0.37353343585199894061 -0.36528910775233153219 -0.45143718469073751409 -0.15240271961988705041 0.42410570836660732574 0.001293556436855681363 0.34123089924241950532 0.049628307222655689002 -1.0547562157448071574 3.1431588185428340765 -0.32742910412488474003 0.00047299456251064658785 -0.50718521297482399568 -0.32630140825970782581 -1.0732347864247320235 0.0097766025641445389316;-0.34226259529219055233 0.020500735619823469424 0.028145554849670854219 -0.3021125184285118892 -0.24539376888681396771 0.34758733404281355606 0.14329482432131240843 0.33978903425369999525 0.39163080157404545067 -0.11578978596340457063 -0.19807786334259605554 -0.20404760329487328652 0.11812257406716576702 0.31180578162777017326 0.35213507884626571443 -0.0041989473789801039921 0.17236436630209300835 -0.18784916162003478801 -0.09329527152056782402 0.42472115013493599855 -0.21025711507597000249 -0.032162043193711555011 -0.26686872665741095956 0.03553616496887663373 0.18016267387997367266 0.053628115501392063791 -0.050141633459406746709 -0.044543357781488955582 0.29917921706948391591 0.64305608496659727447 0.50679974035538122301 -0.23104802181683053997 0.069512554294887854422 -0.12789023116916053979 -0.11920600235105974218 0.40332940606697514907 -0.44160349349282107534 0.82232268157950449972 0.61322219432457614197 -1.4906668554647855007 -0.74223879999068520519 -0.63425764190549871469 -0.1991288375260177046 -0.58158884933962484709;-0.26547823028009409629 -0.30098760623662923486 0.1612844378253807387 0.5297396850011036884 -0.39437674086131724316 -0.36504568705691115005 -0.4771030943128166113 -0.15362812115217361342 -0.27725966046677125165 -0.045132042856349453841 0.17629582038373450836 -0.022187785587906058704 0.071262202458561588192 -0.4294422162283529909 -0.13421438050126346941 -0.03994153978198039523 -0.13811183324121187321 0.036313542155990814753 0.40171442351457137265 -0.20308988149121265376 0.43648673299118811997 -0.16035043544405902516 -0.19065323090411143148 -0.28764200468408984701 -0.28712853354584610965 -0.36786210621307419144 0.19576145724793692082 -0.009912768007191567407 -0.53686809260245205166 -0.33926745641073302595 -0.35647874598505852051 0.16910721353450933191 -0.45181928577751390153 -0.36023990954172646628 0.11568835673255013774 0.18802349591990577538 0.41068189825153061934 -1.2883885957608582906 -0.37541686702710869161 1.5209857987302208837 0.13248046832356813463 0.2985938206760114233 0.56931194590597267169 -0.26130544507587671887];

% Layer 2
b2 = [0.34630064206087257661;0.45570501866013146675;-0.65778466886072417541;-0.32499517867510469005;0.27451937731136810683;-0.42433260661970756411];
LW2_1 = [0.029734666425729743 -1.380324717610708074 1.1667979028886918957 2.5901301398071754356 0.34427525119760238326 0.15588314175656528549 -0.32459476660534947179 -1.6024706964037700452 -1.0993339516943072542 2.3418622204284860189;-1.4376749513034947636 0.37449776707641380114 1.1543385222883413288 -0.1838966524422687987 -0.77767296103759309123 1.2355406358166569625 3.6359978278754168102 -1.1336103378256341401 0.18445817564231956065 0.79583876389582997035;-0.37370974446008892178 -0.048779482125992451591 1.2025267346057102458 -2.204049426740879003 -0.56843436078891884655 0.27718011573595019437 -1.6996219144303079673 -1.6394210792301795454 1.6287222635478202371 -0.6498800748731429211;1.2576014965323150108 -1.1434973953996603324 -2.1063075022404778025 0.12092978309150445582 1.6466853442279043573 -1.4127296376418987389 -1.6574044457465662017 0.38734788429225830431 0.14103063974329571595 -0.91432774403433925148;0.58249970266522621554 1.2396985509769102851 -1.5210318556692405956 -0.81672297196840060174 1.9829929077760071188 -0.64472140281484291435 1.8384484864778427582 -1.319194686792685367 -1.9208118262337678939 0.49300131317076195669;2.4455930004661006194 -1.3226478242702912613 0.47129960666443032613 0.70031480753437969078 -1.4949075529870974322 0.5822418608698166631 -2.2290176073605660889 2.9414271365789406154 0.78766578551457089308 0.363907852294763412];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = removeconstantrows_apply(x1,x1_step1);
xp1 = mapminmax_apply(xp1,x1_step2);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = a2;
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
y = x(settings.keep,:);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
