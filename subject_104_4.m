function [y1] = subject_104_4(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 28-Nov-2022 23:23:55.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx104 matrix, input #1
% and returns:
%   y = Qx6 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 6 7 8 9 10 11 12 13 14 19 20 21 22 23 24 25 26 27 32 33 34 35 36 37 38 39 40 45 46 47 48 49 50 51 52 53 58 59 60 61 62 63 64 65 66 71 72 73 74 75 76 77 78 79 84 85 86 87 88 89 90 91 92 97 98 99 100 101 102 103 104];
x1_step2.xoffset = [41.178141;0.279710358134002;0.00528658390094753;0.336539518708952;0.162357526611765;7.907989934247;0.0984244280936454;4.59655918011301;0.123988336652267;18.113897091468;0.406467898178675;0.682756752635634;0.275788752734548;0.0717507931592794;1.54445289569571;0.095808724276499;4.14131396823671;0.117688352816885;8.80368734882737;0.761207687832222;0.384744490683763;0.354392876104263;0.0365692028956952;0.401191980127958;0.0209807427566418;0.210864296070114;0.0265562000186739;3.22633871099039;1.13200976712365;0.152329222317284;0.283961035347258;0.0135796046365131;0.0553216986252025;0.0040199894624177;0.00718288364709833;0.0049013286189663;42.72514;0.00457894899908583;0.00165895886745304;0.377577906947064;0.165741993922401;8.241122564812;0.0670538361204014;2.109393396163;0.0839930200190253;12.8835374462448;0.0124034084977388;0.126069860503895;0.323306565626207;0.0519161410547094;0.808585710603746;0.0658064208488877;1.88540967163804;0.0794085509586002;5.54960834921441;0.231475680869454;0.18746834741348;0.343382402822117;0.0239325513174198;0.17183010376828;0.0136951031264465;0.0875465036232844;0.0171113316542251;4.37483479432096;0.355798196933838;0.0177027207277887;0.245170077544445;0.0190162769936152;0.10848563720937;0.00464710895301068;0.00983537391845379;0.00573534891284038];
x1_step2.gain = [0.0154062757787917;1.08459515911055;0.675202205904483;2.23981968213127;3.45872736212499;0.0127680741890605;2.73335825564902;0.0060507223530153;2.13968735148391;0.0145846422050802;1.06287447275283;0.603680960456642;3.94491248600419;3.61346584673589;0.0172813685360259;2.75642649338109;0.00673281444024881;2.25740338816524;0.0216869175919113;0.947301228526988;0.567631791474962;3.84570955176263;5.23924301590616;0.0383934540704943;9.86297072008972;0.0811281536468119;7.63915227793014;0.0323767385820338;0.768551873281557;0.686756159478667;2.77866960039193;7.76037257330183;0.0908032085449295;33.3290161130449;0.980194264003265;25.6897114115242;0.00675361552696731;0.933864953406027;0.784825012049417;1.68659143691117;1.49638000309893;0.00299029083834742;1.31699673614733;0.00153748420616818;0.998250958211993;0.00714418057447465;0.782373862785579;0.431714611112096;2.60270750114744;1.73444478522028;0.00459965236295361;1.34167787456364;0.00169113391799697;1.04658732397032;0.0116837626581291;0.664619737564118;0.62829979604766;3.44469166069195;2.69274557563906;0.0113531522630778;4.82074164284694;0.0236926762755026;3.88723958303568;0.0133032691354105;0.64832571533671;0.715538555822871;3.25668070992147;3.10479250853027;0.0151705349636479;13.6034719046712;0.187593652349658;10.9181364020934];
x1_step2.ymin = -1;

% Layer 1
b1 = [1.4393211621921961907;-1.1088207803627359027;-1.0164831931520110775;-0.57537777367557807473;-0.16914026804030857232;0.14922141352308640472;0.20995674685452611619;0.9649519703283452321;-1.4600035183529089799;-1.4915542747311028027];
IW1_1 = [-0.030854210234574627053 1.381995367406535502 -0.96764821223030705877 1.7937184628674136544 -0.24586111111286781949 0.23152386258866855528 -0.075204129562465485415 0.099383651400227882022 -0.020314094727978033311 -0.43466011997904574482 0.9955263882214231419 -0.060537783695468534717 0.35847533498760514314 0.090431686761452731438 0.18757360560031252628 -0.32303095283214222633 0.13623565743311746856 -0.42246573429033329461 0.14503106078560593084 0.99097978382930762553 -0.098726448195284755016 -0.32655476148328405062 0.15617767560961953732 0.3347806729754887467 -0.017989446334952967355 0.054542899429741484307 -0.41173212141502474326 -0.29692826754201107065 0.96235727131428627779 0.062684465811867623453 -0.16109239281403309185 -0.22730504612925392371 0.077927388248254472747 -0.11385591535994682433 0.096241249644897164384 -0.047086467367537403195 0.0091468099293687092632 -0.04929434148245334657 -0.18888202829522549031 -0.11378344629605152694 0.43400139523743613834 0.10174261917432260438 0.27365888702492485729 0.042555360037127606954 0.25401059894749028478 0.54787445378912258409 -0.52341245227446697719 -0.13823111535612223055 -0.28353092446748756617 0.11344365175431300741 0.46503916528144750853 0.38753441486469752952 0.1514895160367655258 0.0075317303241161474847 0.45535497584765727286 0.22782358569514313262 0.0052606698789591354454 0.14350389526245571625 0.23242546532724137065 0.26400162966141305088 0.22431164579561896355 0.054595240197566820284 0.218357795664227472 0.18801125507921898072 0.41130667815329879922 0.21877711637785365872 -0.1248606529113266278 -0.065324405615835218208 0.11253905873422881401 -0.0042390584582609157349 0.36230593448371056775 0.35331931798996724092;-0.054944214097083637904 0.62591425490431629175 1.526874155274639655 0.87986702418134055126 -0.42681957554319666093 0.0018977108890470086901 -0.55297904760599903007 -0.0016046082481581958046 -0.54760392045936445715 -0.27215998592265533418 0.66551914605367079592 -0.4037325282173157559 0.91486441051896216781 -0.10435105083593046449 0.17623006238906221976 -0.28151397246773013361 -0.35617547473061500485 -0.046684159249131398917 -0.040058111095401208179 0.25545737047763161787 -0.11389354723401783065 0.068344564443417507582 -0.016711128469042546563 -0.048373368352637412249 -0.11324314710093537351 0.10170408161687814752 -0.069988233780077402368 -0.16529507789455166744 0.29592495300778187683 0.45646577573239471848 -0.51215180591505282681 -0.075990408930255062825 -0.13209661009542494892 0.12048164650255348274 -0.32765842893515406686 0.20519546139659067263 0.16102310462262484081 0.13453223136801550908 0.081504925450705811851 0.63986718245166462893 -0.085535355121328066064 -0.069504331248964351664 -0.034590513122066873786 0.21488289173377636554 0.0088493252174514473729 0.1295365747570273729 -0.040420587731862051006 0.0962041312273030913 -0.14452531479297603401 0.12903556286261641528 0.033895592189826066754 0.066044292827739103924 0.15798046012110442127 -0.085009203164647814677 0.20687019258815045331 -0.071021366918485262509 0.1578500941294563864 -0.097866937883066565385 0.098496983652860664593 -0.055310017741406578007 -0.23976121332899283378 0.18803281343976646633 0.18402597927517388987 0.13383705904374898488 0.10107932041826132863 0.29185670185201195714 -0.017719372247214697225 0.052824115493578162328 -0.083128623102474138995 0.023538239313165985195 0.1340052924394304068 -0.32473560621098951362;-0.12422776899650954385 0.35290394324738894039 -0.86728577186537603172 -0.9381282916676978445 -0.11145130731968357074 -0.04864802935150796398 0.038008510242872370344 0.074355910400072958155 -0.050916898801748738945 -0.42030498211427297361 0.53169203398021247509 0.39936105899492485571 -0.69289198678682362154 -0.35714573778714880925 -0.044550730692278141254 -0.21900411396354882432 -0.17854883565329490724 0.13560163827864191166 -0.12449285810792722062 0.98530062471987966966 -0.057658600359402387148 0.22332040113458365149 -0.29833494723037412566 0.093611919673511526097 0.056310244058026169556 0.024226016787682894127 0.017761099100859455147 -0.33303355718906219041 0.46843361190443977282 -0.19799034630693493342 0.17036964103825302796 0.19417063095206260614 0.19931278074457295379 -0.10879841456364330865 0.26750169577678939437 -0.20829178340769341493 0.22788281937019100321 0.18477665309447910413 -0.02175180911443758483 0.045773735681686411603 -0.27505846919619453272 -0.15617004147140137182 0.3054875063192735718 0.32885013760175063613 0.15961863469706111252 0.029830563428005784504 0.21496646090170626331 0.18995264963406141567 0.0049803799545439890462 -0.1169623870954984296 0.238144895108381216 -0.083018218184849765229 0.15874885178090064608 0.18265458803797482434 0.041785770606439905095 -0.12563694681455567226 -0.021983295457246091603 -0.087107260907548000883 0.23474378065264003834 0.12429047233171276743 -0.21474766193379887791 -0.18684429931812865378 0.16126176933507554989 0.30903313766543272223 -0.60723564538564644977 0.19312209261123611248 -0.2323978819441444299 0.1817456653820866963 0.3825354680220062753 -0.045859508891395263375 0.32199775580224532234 0.18323056764095804749;0.21778736700077461208 0.042070650852974705858 -0.18143522103017462044 0.0025029399012742848361 -0.1096174561492389149 -0.097383791271756073304 0.10749110269352243896 -0.15362689195625331418 -0.13914817818971503272 -0.35107601631601603742 0.3549601519517198156 0.11837731171002714714 0.016339789046394877919 -0.25031743139505902018 -0.30538656172880779271 -0.0018404670749589801398 0.0027676014235194145927 -0.24056207621308406397 -0.3354325061235917671 0.35664176583182216618 -0.23148997375288740685 -0.087387885785486146828 -0.059873015556262162984 -0.10475347893485117967 -0.39281148480557653846 -0.17521617953468926476 0.051374988363197683638 0.042849041560990300259 0.44342480546438928224 0.19033522057630619662 0.090965214672582325739 -0.29515902620790718247 -0.10747911962510864337 -0.11740038777801684033 0.12557547187553788626 0.19521470894480086322 -0.071189654802811433432 -0.052565423529712246298 0.29169214301230528275 0.17563255387870135849 0.086679960148374743389 -0.30180106538261436411 -0.29099394779065335115 -0.17243104060670166877 -0.14247920789162180077 -0.002787750187169689333 0.16615904544929782638 0.13237037275750576648 0.12033028707785983769 0.10877177003547171263 -0.16315490913694663533 -0.17336940849412510457 0.081586227447628473231 -0.23503637386295492262 0.08386617358759798635 0.04444075688139117325 -0.042205897251054412533 -0.15754867690238871791 -0.28390500356803910487 0.19930417233613734185 -0.057685972107415522947 0.13138321151658705066 -0.35998255156788278031 -0.055904876937087781552 0.26680603512848449776 -0.24504462342555052845 -0.29251533240742916275 -0.045611369929745959606 0.11719566644548516654 -0.28844432738663172699 0.071588845452590699203 -0.14685474719599514448;0.034383219187702110387 -0.078520463062854886638 0.59257318260659885834 -0.75469972062244128352 -0.20841374401965953589 0.35304598433767059307 0.093027512525730035597 0.090291240472638062409 0.010944211130923815756 -0.16844170338052999458 0.14716492678809267591 0.2341012644942077614 -0.56203698759575215771 0.24242563317274612444 -0.023073189167361098095 -0.18739343312513617734 -0.10561052159491329805 -0.11892800464692468432 0.18880228147207256395 0.18694279796467463961 -0.067504958625689823193 -0.31949970266967386845 0.061396074230213724954 0.26517715417527010224 0.026419255910178143787 0.1757877573029103524 -0.13815128115794447772 -0.16797405102527768195 0.16223734892416979969 0.056984909188838916982 -0.08048642214158065189 -0.031434455208116697522 0.10288962347598702707 0.23935451429482212937 0.32561199557907988256 -0.14511324503047443035 0.2150332469078385933 0.54339198100428587335 -0.058551433277063309746 -0.42384870462948393 0.14137107574862517456 0.072957491059221890595 -0.35439801758063349535 -0.27314441001304473611 -0.41789476253249019377 -0.36982464582735563585 0.68635636601974459037 0.21922109117958557545 -0.30449983558919796467 -0.40767019728189041183 -0.18259738011873269392 -0.23198027124527204057 -0.080161689852960585356 -0.038622291723330953728 0.029308894533067612886 0.25425322093991786776 -0.054377625066985180169 0.43985442494915555356 -0.3717877745094539943 -0.0051609539340176265043 -0.10117937827519425664 0.042722816414478781422 -0.3094555392263689253 0.11269435168961346172 0.4167659439956860612 -0.31705208230768833211 -0.16891820015891439999 -0.058779537064094035392 -0.045799549039409803708 -0.14664251389029772654 -0.13704958564388405873 0.0020647514129104706584;-0.18839319788652553189 0.0056912837767612786677 -1.9817290703297907317 0.15233606626016718555 0.23619110426878678344 0.035910696915648403216 -0.26724280538904643389 -0.34491010410377936912 -0.36819775959635342444 -0.29764211764341069744 0.32868080455628251313 -0.020260353254072348272 0.47844350765324045183 -0.23868258355407279137 0.069944992844195807979 -0.20392039777798484645 0.057411515497651589846 -0.25844271398911988769 0.071013815263811896905 0.4804317782505704848 0.23483423200688785526 0.078124041772499680514 -0.30021612442774203711 -0.2324605127208592692 -0.45376602304635588192 -0.35949468225255670761 0.05378735969275539458 0.38285973803815398497 0.00012791251992149560435 -0.4135322898331151853 -0.05252501089704267323 0.24126660675494965291 0.26872766818089061092 0.21158772964866010002 -0.28399316816462966129 -0.12425821730874780924 -0.0010843826824694737833 -0.14454292111808925148 -0.088497842527832090709 -0.79007653091200136242 0.13377939553995271682 0.24988958150672174741 0.085432148309599997837 0.32614078488916653509 0.11587374596625703294 0.4204433151308522576 -0.29516875589267993485 -0.19284961105387635194 0.09705024952721781617 0.16132091943827003844 0.20120356263419927889 -0.033851314170982957363 0.33305002422418700236 0.10896680526737294314 0.27583946148645421825 -0.054141962314484100294 0.0042268929240990727597 0.59776334636687444846 0.45682115492095032305 0.072209664975620937999 -0.039001964707856363879 0.27797853717237586135 0.0025180527703667506499 0.0050590052108800409592 0.00022744617923174149932 -0.023859750612554578991 -0.40754813683074569974 0.17271722004012046714 -0.11289661001060080636 0.15197448864986548567 -0.20156164514198923743 0.22132156382235493308;-0.11894405921275005844 0.31192861609116345756 -0.12947822535136052635 -0.96477497076722440461 -0.41537710994180254698 -0.01634576026914725741 -0.40579716819938144168 0.074293498187256890031 -0.45017946984221723916 -0.46660384762591389229 0.58266097493754087644 -0.22460612633262985738 0.25772394230687162286 -0.15077881105279264395 0.077197523487917862894 0.015316086272043095973 0.13693399103182748999 -0.14112577321846611622 -0.44425465470448732841 0.30223103320191296861 0.086263379930148237351 0.43310138741718617883 0.11255967105967167041 -0.14144537683606503431 -0.53254074834440390251 -0.39623726349285548487 -0.6500868311907982422 -0.13432678471509904017 0.033359284032369686257 -0.33508621202096106062 0.26209928254260134173 0.059144250835579351144 -0.043880951764951652005 -0.14019131319877062292 0.17771272983673977452 -0.21435538901193743055 0.32628741296034735608 0.027761237654668279029 0.41647402833736879568 0.2735343148001503355 0.23439919385946911268 -0.082345649118195418659 0.097627241658912386479 -0.16949068911780129643 0.32749909912404046031 0.021059704925407228548 -0.30566474476980537434 0.15914814219311804178 0.13948446546074422248 0.25805367612152935175 0.30014165435601519727 -0.039606498707352416622 -0.082220198974772853995 0.16051882789476823454 0.25889135348039749029 -0.075537969655994186002 -0.00088226767180979350641 0.3243773825861649418 0.39443208149392550155 -0.019840706684867336074 0.18668240997623136712 -0.057423687622955854604 0.085639492270491099357 0.18322847435180938946 -0.32818526334641118236 0.05435414084678251434 0.04358447685128300636 0.30968159771563591454 0.274663749349960018 0.24463781504137149803 0.26329561232594794751 0.20226755535360396721;0.17057240541155621605 -0.324018926938207108 0.017583948790259120581 0.055148340174330900965 0.021297977878721563449 -0.0027890810630286306041 0.21113025826158157705 -0.14292529870854744911 -0.18289214432569997348 0.20328163458944512043 -0.20131866037656709345 0.17676599554823388405 -0.26592487967775646496 -0.14976425610569343849 -0.016777683203537899909 -0.028618959855905259232 -0.19864449570141176626 -0.184503829251658924 0.048277479002997857049 0.16222076402931118189 -0.29496004609820919429 -0.0970779949448502405 0.13076437539544713551 -0.26749330156411815773 0.11957017604357633722 -0.094196645671391396326 -0.17035983951876226827 0.042854937073010336557 -0.040932800658226686785 0.21017679624081092582 -0.2911322106617255101 -0.1520561109372197961 0.0065808252072789043263 -0.2181125643781773038 0.098972507838964371429 -0.10128568943961784032 -0.13025763682798052745 -0.34295413445822436893 -0.10275373432144223329 0.050313554116551924278 -0.13242142068898676843 -0.26499525452792271896 0.26892310303609262556 0.18899032059112208515 0.051862877633792076049 0.19442042353133068278 -0.38005264503610308724 -0.30401020713009918595 0.028557483750153302149 0.20907301867129995943 -0.096437485689798346788 -0.19063776311114524753 -0.23381865385794167733 0.30133871413355856062 0.013559818104483464807 0.083547263584568903783 0.14188552085719696727 -0.050208659903374058819 -0.15358297350081509536 -0.18743026401523646407 0.28584564886494279179 -0.1656758985590576494 0.20463047357696331763 -0.1570208160644072648 0.071036118726195210393 0.10219721852479674018 0.10776041624751417358 -0.22725183516477720502 -0.044141101303085773788 -0.036396523195747765289 -0.015644400245486113354 -0.18632987153474414588;-0.30840061528652545908 0.9019232794756881777 0.16565185935217471846 -0.77961482900661682738 -0.3947633879858696293 -0.041766279347964084534 -0.27071739794323634865 0.060674288309383359041 -0.19725889319521547338 0.033425747144758745366 0.87046152118588704383 0.12310312031187951864 -0.98945847323622571068 0.031829042958162509502 0.016024063985004780714 0.082924607929757282454 0.10472697824931341548 -0.021927547663056667221 -0.43458811367195915309 0.91020158212557855659 0.18862372536222793418 0.0032237489672417339939 -0.3999357698298885988 0.012406252227587892534 -0.46296632559167882892 0.29076035279424050639 -0.32024254718584604928 -0.42868706992947658296 0.86161847663072810288 -0.04567420262608592324 -0.20578939893042330622 -0.52453958284236723575 0.26710419934602414038 -0.26363499219404307183 0.30889968662794298204 -0.53501147899177015077 -0.05147283072037118351 -0.065333826391767255148 0.18120315217694302201 0.49306060936953560736 0.3050139424210488448 0.39615858213667454191 -0.089133755887760582337 0.0095769748000677674959 0.23662911410526060729 -0.048194334256116827531 0.24383328071089460654 -0.2266402675316611659 -0.26591164787003884751 0.19557868360668465013 0.076622241119360071093 -0.14819785325899992312 -0.065320680358848873248 0.10943767988777812483 0.29689937727790410849 0.14737865400113325798 0.00076209528660842185133 -0.22391477471811116473 0.23796757301527707296 0.39137390532113036645 0.1715958855819622042 0.082649511644640641372 0.034615698982501226511 -0.006229453925377249901 -0.010980624375555345096 0.098530679234497653418 -0.3496151374214446772 0.28347512851782913357 0.30739462776394338439 0.25130738898176702145 0.45826316817930445868 0.35109160275193196377;0.043599611783567353285 -0.28952035951318905171 -0.068873942707819671427 0.20520066720937615856 0.18712670124200803112 0.22734356157050616964 0.36537858907429265898 -0.046105440869336059007 0.27762532177113080634 0.35856768702887037437 -0.21644641636692824038 -0.2541232803236204707 -0.079484551959566634993 -0.023716874229368415522 0.08536806942423599831 0.029373073641060287731 0.11624149169435105122 -0.17645103195481429137 -0.010443292451512566771 -0.04713861756453808366 0.042175084445980004499 -0.20421626866342468265 0.056725638538845761516 0.12939603857176651402 -0.063318513460930453407 0.11784888922565002478 -0.091728665354134070187 0.22863762264351131237 0.109065278534110216 -0.19320971031552794384 -0.26168664321915413584 0.041452039134128884634 -0.1545253166997505867 -0.095418805320305943862 0.010542339355855415844 -0.096195085083477516186 0.17226041934315705628 -0.27957899584773776569 -0.12595181855405621074 0.17341118648205305908 0.33096407392696253202 -0.064286663972861493588 -0.0067903738636431827322 0.025303107724820892571 -0.045076536067242593819 -0.12443845895309364746 0.033381340530953429457 -0.16246547466033559037 0.28062720959209003224 0.19563103084937760734 -0.11010880189792350559 -0.065005651498244776398 -0.18746794692462065424 0.2846152068964077908 -0.01310378900968357796 -0.16016909511118770926 -0.005597436069145048966 0.094798693324010627204 -0.058404493354716278952 0.18246079942720455636 -0.0086302987413713391079 0.38391966076801181673 0.19860945131271109942 0.34646663346971956488 0.096033143913743901354 -0.088987196486437561416 -0.23285417821969617291 -0.11816595788677644596 0.32382574680001269263 0.34741115244160675202 -0.0055431874713132919807 0.37383842004684186833];

% Layer 2
b2 = [0.80640293456307654552;-0.40650707456379336913;0.72245596494496566731;-0.44107731745702860593;-0.80240702396141960762;0.18649895224801521509];
LW2_1 = [-0.3063628272965510102 0.45473362390999627625 -1.5159088066735526557 0.57713884210205723679 0.43382916129715437537 -2.0187995424554396884 -1.7337955242402534051 0.031994306835125684019 -0.5850784627079421707 -0.036063455121314764995;0.33097341085590398224 0.0042466992579686339143 -1.23189190035917151 -0.52903741257885483762 -2.374953156699175949 1.4082713591258955166 -0.79909920911329701543 1.1943838292759727526 -1.0684683940621402254 0.048015932080276026162;-2.0296762466738935693 -1.5838231104946018934 1.8538767049830402467 0.86357529774670960254 -0.44773236974962810075 -0.45510562889520417285 0.63982908987910491749 -0.29340883854463195579 1.4974408570415731479 0.62664205210487966546;3.2041688781444075396 0.36826329863007895016 1.2236602036638877244 0.42693694013620619998 0.47809528186488325918 0.8520312338517668227 -0.23147872337500469131 0.40289645589663641845 1.7188248624864770342 0.39168389531621622401;-1.7963728176219124766 -0.3611601211421111568 -0.38691431033130641026 0.74518077955648631683 -0.10413138886010450679 0.64753073297700125543 0.75360574591050000226 0.21265357558002787042 -2.1030539618531753909 -0.3082737179410194317;-0.42924383504600088779 1.810227695826549521 0.25520821745834948446 0.58002232080621818344 0.3012532408032885245 -1.5681674089177954912 1.082422349972000708 0.073936067028250174182 1.4856996274211402564 0.09929489634193144898];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = removeconstantrows_apply(x1,x1_step1);
xp1 = mapminmax_apply(xp1,x1_step2);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = a2;
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
y = x(settings.keep,:);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
