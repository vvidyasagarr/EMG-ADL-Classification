function [y1] = subject_64_1(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 29-Nov-2022 00:10:13.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx64 matrix, input #1
% and returns:
%   y = Qx6 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 6 7 8 9 10 11 12 13 14 19 20 21 22 23 24 25 26 27 32 33 34 35 36 37 38 39 40 45 46 47 48 49 50 51 52 53 58 59 60 61 62 63 64];
x1_step2.xoffset = [44.147322;0.000167541640345407;0.0201822675651471;0.473138657033909;0.173510724664961;9.031791472128;0.116591120401338;6.87337493539101;0.151617532093413;22.0977804218566;0.0014315174094236;0.00634488983273371;0.314812856348473;0.0914144335275881;2.50697959715095;0.116057000528727;6.3411873337963;0.145629613725944;10.8129725793394;0.0406476277618608;0.0119944033948882;0.349566629995302;0.04593972465048;0.633137490288575;0.0276444051639876;0.33824227716714;0.0336339868903107;7.61011666586446;0.327072702346713;0.142796801106978;0.288214270955864;0.0328073940155402;0.322897530627272;0.00822299249422813;0.0333016725537156;0.0105535222216722;37.029492;0.469301956954714;0.0263931913237148;0.387658823697043;0.153980955600522;7.113040406295;0.0739639698996656;2.707336321325];
x1_step2.gain = [0.00539589792077006;1.03829908522533;0.612160472924669;1.75162783787616;1.2406856370352;0.00211105074364885;1.09658992148482;0.00107096855151376;0.850296740161681;0.0057637203018119;0.963813821085076;0.535732985679452;2.78831454584554;1.40887376387689;0.00293075302745849;1.11964147592361;0.00117898032272426;0.89256531523504;0.00902399631552109;0.758864428467132;0.608082683112555;3.17165117684554;2.19964124526091;0.00732394471215878;3.82822252372674;0.0123701666330233;2.84705361111524;0.0122269634576017;0.757610558590988;0.456538581797389;3.07391303587041;3.06621116555944;0.0142372323692;11.3511207840417;0.120825697835081;8.89003375723505;0.0204966296469523;1.08149739769236;0.691903929772655;1.70483783410438;4.49680774365494;0.0199135429188125;3.66883533895821;0.0100165928304331];
x1_step2.ymin = -1;

% Layer 1
b1 = [-1.8105288291786212351;-1.4692929457397705395;0.59560525517439943943;0.1196035142022379566;-0.49397196734619713832;-0.18694416962934251591;0.3501567712662275178;0.50633338425766538649;-0.64150309566418617369;1.8931835042462319407];
IW1_1 = [0.10537094862820671481 1.1511892831042376262 -0.30161508745420623212 0.18559660618007403632 -0.19257164012973143619 0.090838653937408017636 -0.40132459843845452729 -0.16684498762356098078 -0.41083800520850083382 -0.14896049612469502987 1.3044748303379383181 -0.099678979350892565892 0.39235046777449478217 0.019544328059261362879 -0.088620175575877729868 -0.29460452823035615522 0.0058862439663864242131 -0.25373000848866422707 0.20778360812256141399 1.0119954033547204908 0.43624711203058053055 -0.24078367470270126138 -0.010384135047524428036 0.03433966181874287954 0.10000991062134562126 0.2566680688850428993 -0.14731008775130488564 -0.53626886640997606381 0.839967208297986212 0.073376539562730963562 0.15338285122485048606 0.18453601421402132665 -0.18056567856109706494 -0.18402384037904059855 0.41850041236821722279 -0.51758296156000582755 0.35250413281098952334 0.02136972621172528175 -0.30353730869064332598 0.17648826505664355624 0.67202427463101965799 0.35071274875152136374 0.34135745090239538735 0.25457531084076379102;0.17272452181957617667 0.66394350493547993342 0.36168463099057890364 -0.18679754566242018354 0.071046697934802990892 0.080169639045348420336 -0.17471758251311433896 -0.13905389713990659595 -0.32247941531230939205 -0.046691381688079437728 0.34583284707078593145 -0.029165950279035991743 -0.30219629933616970474 -0.36384058251738543577 0.39229046325649935545 -0.12444634403343182716 0.04837236630331601811 -0.19771183593664110045 0.021443383514148539604 0.49220507252128142817 0.045938378321709848195 -0.10489834281728904752 -0.33074118338021751828 -0.14436567997197435886 -0.41278507951837617451 0.34222378993791524593 -0.44521452285805185323 0.22603708022799748334 0.29719193952180233964 -0.13495933437185450576 0.30271339232244798279 0.080654049139782413302 0.49067008524418170845 0.0086118113319778588632 -0.21926591543576401389 0.027119644822042390797 -0.36814314604442860412 0.91621303658710662177 0.072939284426178807585 -0.30607009054859085628 -0.38149376598873879773 -0.19772966185640838965 -0.09633927625489904778 0.23712732337644479297;-0.037302252549906260437 0.11138349626072863163 0.027947627622733624275 -0.26071946774216347986 0.11447685455546215139 0.3635528647767103938 0.44759415747395359109 -0.02345479806167065015 0.50321888574649908943 0.45634725684817395441 0.043526685254853293705 0.12117966664063996307 0.14599904561772161782 0.57844584780207408681 0.11656745796288933703 -0.010742225846807276421 0.27549388745046460292 0.035187764454994219232 0.23692282082197529958 0.23166046372624365945 0.002158114314171624519 -0.20766177950690756226 0.057634992239390087088 -0.13669700455641059511 -0.072756821030600216105 0.43886137495774146799 0.61936293958973176466 -0.014810273874150212819 -0.16919823613607212764 0.086076897789767889413 0.38959098275011821988 0.33242547634282648694 0.50513385816634370773 -0.088889522838226361912 0.091794749018012919417 0.40407153898435688166 0.38955907274263640305 -0.72115632179646038669 0.30309543805606609101 -0.040178781256399530297 0.81153613033068994209 0.75561764923825458506 0.83071791859036425709 0.86709850340151617409;0.11428128806653747862 -0.75089618465967544747 0.090541647245456297055 -0.36877131411434049824 -0.29980422892052155381 -0.6596703257405398535 0.14788297392808077979 -0.063179315000786009926 0.17436741304749461823 0.19346429831560782442 -0.4139768330770777216 -0.43029664662711175627 -0.39477196241969497725 -0.43441281820232241495 -0.51500840534093839107 -0.35608259629070487806 -0.40393604845272446102 0.21463318426190647337 0.13552581191516124837 -0.27999936537148456539 -0.41353993741638117587 -0.15941854070539046573 -0.23171471230424522947 -0.10908937353947543991 -0.078113620077301507139 -0.41907423111703695495 -0.38391591298171778845 -0.020726743098464759513 -0.43141995236294261584 0.021931552185834236879 -0.38651614165281106272 -0.18223315510220763902 -0.28213598526720878867 -0.36052843343756102445 -0.081848432099244763926 -0.46561015039813458127 0.0043762793303486393487 -0.48603789513214784579 -0.036860951216433589239 -0.33469685950599786795 0.24818393199031488217 -0.18379726411345206905 -0.29252956933028417819 -0.53484153787681165682;0.64427072165566379169 0.26401558882004250162 -0.089228152124091381081 -0.68724762955120333174 -0.31463685786590150917 0.28888774237098491238 0.16669974362493497622 0.54499117878022484973 0.030631010880163872523 0.03872493379657577367 0.12566825893869934538 0.21814509365826473264 -0.21672762442558723972 -0.18818878943445457863 0.30434565820812126136 0.011618103637467718653 0.13652739805215588498 -0.085134284359732290137 0.032877148152579013796 0.34014400541180356274 -0.18979599765385687937 -0.06106690887477131402 -0.066847980081019706122 -0.047218028743779824619 0.19628253540747989114 0.27954089828696015996 -0.085099960873265503847 -0.2650783619180874795 0.8537764870020945196 0.37614217391838777882 -0.32297831322059017412 0.1880262677036011465 -0.023734156606384414212 -0.54329708277908950187 -0.20210704687144406821 -0.083445212554797754123 -0.31234455064551430725 0.88568381338686585913 0.035295197117488234795 -0.52214851743556200958 -0.64439499536778166444 -0.59135789838224694925 -0.20079244177741056854 -0.17467399070650127535;0.39292876058697334685 0.32710918804802002757 -0.34308322785419109735 0.28581473415198249688 0.56070610386414587722 0.66128452884477972873 0.033989826246680503175 0.3419597157555516187 0.20844142856883143833 0.25650263899432451664 0.036120975249974533738 0.34685285769765256125 0.53204852923048273627 0.31925946518551961972 0.33304836261573750322 0.41652520644550117268 0.05041625945349587079 0.50064466863065337776 0.49433892210329577477 0.041911911544548950681 -0.023921977910203198053 -0.024698562405427466199 0.45482801829936297944 0.67995587556498682247 0.14221655382153461367 0.22959083997255849696 -0.066741745136497623858 0.29036356573268717884 -0.43800820527656347814 0.24241749991254293861 0.5200366129650053626 0.088927727551477445123 0.15753843400057851443 0.2534403254772723546 0.090407292891772642052 0.16172474155725138911 -0.22309987042361420495 0.060786646212732144134 -0.16120449019690993864 0.034896473391384241758 0.21990592852719098582 -0.010189093889584490901 -0.0051262510930645257753 -0.47442794411952204925;0.25905530094442552613 -0.27579323233704461371 0.065583176522341066206 0.32416889499020484777 0.48383670053973892866 0.10314938633607276253 0.32949238477488851373 0.52433554397452575291 0.54011576725753962513 -0.11688879534204790756 -0.19694944939193992361 -0.025400249211047522951 0.21478567310384849565 0.38190157788204381895 -0.14382341728779479695 -0.055089584204416959523 -0.013588902192910822658 -0.10123467702979628557 0.20810315396613093819 -0.043414739486035976157 -0.11616074090115426076 0.39636340272952641506 0.25505354613328179436 0.065338040364733313003 -0.066979529407147020414 -0.096486859492055071508 0.60517319305866146273 0.036910589389573145169 -0.28342826392478220887 -0.28205979401756336999 0.062162141351563240943 0.12234362151297854815 -0.090778650898335477848 0.5122879248580667344 0.41137658587256203946 -0.00056389773297192398536 -0.088648770184232228431 0.082096156786647084269 0.38784619565801609076 0.50373423944936557284 -0.46540958168147333884 -0.56479143429833877921 -0.16170853652068351014 -0.68276892262929833599;0.80408153344450761235 0.093776992452551583002 1.1031124726881782472 -0.67524733468778741496 0.59189999583857966226 0.36144186209303885704 0.29182805363715719205 0.22216917355149481961 0.28881503865515256724 0.51043204186048696247 0.25000818858226719898 -0.15264396371879360159 0.061635284553888974868 0.52500485916886330262 0.60132152778894620848 0.3303675964913493357 0.76247084647452278983 0.70024623455750456547 0.48014393693777029926 -0.25802890381936172126 0.12945204000797791433 -0.13067853525303543827 -0.077140776897013679791 0.29798154567599077769 0.42219117761785335263 0.0021224938699690876903 0.062880357009663476187 0.064647060783597803946 0.19857112863370621203 0.28994366747137823026 -0.37601474500015202862 -0.16290457988947826262 0.26327872240336019916 0.39630612504302226151 0.12890173632213097754 0.26064495587807318122 -1.1451555832383377709 1.9524896865509593358 -0.96606760267867064496 -0.9922856284557757256 -1.4384522123304626096 -1.0391576076409132501 -0.9084762682101942266 -1.2430233521478368797;-0.48303169216907354544 0.41036822532305022859 0.060394875439224164626 -0.13295353567130688277 -0.73605989045393449555 -0.59771604369638486887 -0.026411071777656912329 -0.10253608899119361075 -0.33439997569145968326 -0.36683875346077560176 0.019918337466061319246 -0.43951262318597694723 0.055193688838497671767 -0.72526208263991431835 -0.42125149403976958062 -0.33109913943408669779 -0.56384034320815812347 -0.073742526439698183327 -0.73479298486842659077 0.032028698126033802729 -0.18121209443788832694 -0.30051316807226419181 -0.40087060606818464281 -0.68702857769757974538 -0.69803504042174402411 -0.58338785065476450598 -0.032139450495347991754 -0.59366715965168037616 0.37563195910414315382 0.060331820333355296038 0.12788619972399278835 -0.5259254981928270789 -0.70357891800898753054 -0.47199136253078644021 -0.5061517448043054701 -0.20725878581094231423 -0.28595302047569487458 -0.15232260865603511335 -0.39191041239893831261 -0.40220360098727220288 -0.32166983565040019322 -0.54036325624462799855 -0.35226846781237486361 -0.37362222567887037883;-0.13828314009452016831 -0.078252764022523915721 -0.41259017261745278837 -0.25877375113607542501 -0.50413362793236327075 -0.088089635633171972651 -0.4821278457110058091 -0.45359468327650037667 -0.12734909988223905297 0.0208057773109911609 0.29423720981056400436 -0.25830451156642725286 -0.40265993148032852567 -0.11057968967486483947 -0.11911612154832185162 -0.09492963639586160518 -0.47741606880422388093 -0.60049451840419143522 -0.49975103491804129252 -0.050575548590975800967 -0.27619696986891090207 -0.35573827118314832463 0.029811641365602842974 -0.19593599896076543954 -0.085480395230889183456 -0.12974514797773506469 -0.36065039354390082682 -0.27305751896907753951 0.2449928436337205917 0.016428755786415675383 -0.16376278325532381275 -0.22105455661851303173 -0.067842117859396602886 -0.53737622527470174649 -0.66974338845547465304 -0.20474958776172291763 -0.31198080599073330088 0.083500420789542006972 -0.25866632228998803766 0.17124610367618003925 -0.42139417624925590289 0.26828171577883425103 -0.17919539821822771941 -0.095100595905771065364];

% Layer 2
b2 = [-1.327975904701251153;0.18164755464331802659;0.45061376446892026371;-0.51772623873175971365;1.220819595126963808;0.55347158177976774063];
LW2_1 = [-2.2765369148149430245 -1.116786363952022576 -1.3029785142656187258 -0.21918996593250456018 -0.095483079545436916336 0.12818699959908924635 0.24672770066928043087 2.1034803935255514951 -0.51030899859189893242 -0.21207408272911859592;-0.90990154223060881744 -0.39432722871570541345 1.7960580086558823876 0.37175163258156629364 -1.5158919123868015433 -0.014308785095956833705 -0.50030847577352355326 -3.344181978336066674 -1.0014107443846502754 0.052782632463539244649;4.7406825623584634144 2.2159076651013585035 -0.028470003429569658293 -0.70822901800645443604 0.44536026383341459356 -0.38038371336984849735 -0.52151350755913317148 0.39468659831338992472 -0.27573220129334213846 0.09565675652411081975;-0.20566605168542495541 1.8799896298199996192 -0.43631420405255877393 -1.0241964486129964129 0.48031301410330151658 -1.0771504946583077 -0.93272398153395530418 2.6258236626820212756 0.3174217891213297893 -0.19810978862521788635;-1.483875440423099823 -1.1314659682853840383 0.53318012371515977055 0.077374883957247689303 -1.5754254426386076204 1.1954862752917010393 1.0830319953023557211 -0.8042218015749215132 -0.84438279627890466816 -0.77005319849806874721;0.78148557943258822878 0.78376095136374279715 -0.39674077647334493602 -0.095455309053420978049 0.52250715237843770034 -0.74403218957753902707 -0.67478228688589170225 -1.9660990891523251189 -0.11703601347671373223 -0.75979201452506084369];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = removeconstantrows_apply(x1,x1_step1);
xp1 = mapminmax_apply(xp1,x1_step2);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = a2;
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
y = x(settings.keep,:);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
